{% extends 'base.html' %}
{% load static %}

{% block title %}Home | NOP{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home_style.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
{% endblock %}

{% block content %}
<!-- HERO BANNER -->
<section class="hero-banner">
    <div class="hero-content">
        <h1 class="main-message">Todas as portas abertas da PUC reunidas em um só lugar</h1>
        <p class="secondary-message">Não perca nada: todas as oportunidades aqui.</p>
    </div>
</section>

<!-- CONTEÚDO PRINCIPAL -->
<main class="main-content">
    <section class="carousel-wrapper">
        <div id="opportunityCarousel" class="carousel slide" data-bs-ride="carousel">
            
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#opportunityCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#opportunityCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#opportunityCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>

            <div class="carousel-inner">
                
                <div class="carousel-item active">
                    <img src="{% static 'img/placeholder_img.png' %}" alt="Slide 1" class="d-block w-100">
                    <div class="carousel-caption">
                        <h5>Oportunidade 1</h5>
                        <p>Conteúdo representativo para a oportunidade de exemplo 1.</p>
                    </div>
                </div>
                
                <div class="carousel-item">
                    <img src="{% static 'img/placeholder_img.png' %}" alt="Slide 2" class="d-block w-100">
                    <div class="carousel-caption">
                        <h5>Oportunidade 2</h5>
                        <p>Conteúdo representativo para a oportunidade de exemplo 2.</p>
                    </div>
                </div>

                <div class="carousel-item">
                    <img src="{% static 'img/placeholder_img.png' %}" alt="Slide 3" class="d-block w-100">
                    <div class="carousel-caption">
                        <h5>Oportunidade 3</h5>
                        <p>Conteúdo representativo para a oportunidade de exemplo 3.</p>
                    </div>
                </div>
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#opportunityCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"><i class="fa-solid fa-angle-left"></i></span>
            </button>
            
            <button class="carousel-control-next" type="button" data-bs-target="#opportunityCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"><i class="fa-solid fa-angle-right"></i></span>
            </button>
        </div>
    </section>
</main>

<!-- FILTRO DE CURSOS -->
<section class="course-filter-section">
    <div class="filter-box">
        <h2 class="filter-title">Ache oportunidades do meu curso</h2>
        <p class="filter-description">Conectamos você às oportunidades mais relevantes do seu curso para que sua trajetória universitária seja ainda mais completa e significativa</p>
        
        <form class="filter-form">
            <label for="course-select" class="sr-only">Selecione o seu Curso</label>
            <div class="select-wrapper">
                <select id="course-select" name="course">
                    <option value="" disabled selected>Selecione o seu Curso</option>
                    <option value="design">Design</option>
                    <option value="engenharia">Engenharia</option>
                </select>
            </div>
            
            <button type="button" onclick="window.location.href='{% url 'feed' %}'" class="ir-btn">IR</button>
        </form>
    </div>
</section>

<!-- FOOTER -->
<footer class="main-footer"></footer>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const searchInput = document.getElementById("search");
    const clearButton = document.getElementById("clear-btn");

    const palavrasChave = [
        "vaga", "vagas",
        "oportunidade", "oportunidades",
        "estagio", "estágio",
        "trabalho", "emprego",
        "bolsa", "monitoria"
    ];

    function irParaFeed() {
        const texto = (searchInput.value || "").trim().toLowerCase();
        if (!texto) return;
        const ok = palavrasChave.some(p => texto.includes(p));
        if (ok) {
            window.location.href = "{% url 'login' %}";
        } else {
            alert("Nenhuma oportunidade relacionada encontrada.");
        }
    }

    searchInput.addEventListener("keydown", function (e) {
        if (e.key === "Enter") {
            e.preventDefault();
            irParaFeed();
        }
    });

    clearButton.addEventListener("click", function () {
        searchInput.value = "";
        clearButton.style.display = "none";
        searchInput.focus();
    });

    searchInput.addEventListener("input", function () {
        clearButton.style.display = searchInput.value ? "block" : "none";
    });
});
</script>
{% endblock %}