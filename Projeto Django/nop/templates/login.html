{% extends 'base.html' %}
{% load static %}

{% block title %}Login | NOP{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">

<style>
/* ESTILOS ESPEC√çFICOS PARA CENTRALIZAR O LOGIN */
/* O body j√° tem display: flex e flex-direction: column do base.css */

.main-content {
    /* O base.css j√° define flex: 1 e display: flex */
    /* Vamos centralizar o conte√∫do vertical e horizontalmente */
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    min-height: calc(100vh - 70px); /* Altura total menos o header */
    padding: 20px;
    background-color: var(--primary-dark);
}

/* Garante que o container ocupe toda a altura dispon√≠vel */
.page {
    width: 100%;
    max-width: 480px;
    margin: 0;
}
</style>
{% endblock %}

{% block content %}
  
  <div class="page">
    <img class="logo" src="{% static 'img/logo-grande.png' %}" alt="NOP Logo" onerror="this.style.display='none'">

    <main class="card">
      <h1 class="title">
          Entrar na sua conta 
          <img src="{% static 'img/logo-pequena.png' %}" alt="Logo" height="20" onerror="this.style.display='none'">
      </h1>
      <p class="subtitle">Todas as oportunidades da PUC-Rio reunidas aqui</p>

      <form method="post">
        {% csrf_token %}

        <label for="{{ form.username.id_for_label }}">Usu√°rio</label>
        {{ form.username }}
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
          <label for="{{ form.password.id_for_label }}">Senha</label>
          <a href="{% url 'password_reset' %}" class="forgot-password">Esqueceu a senha?</a>
        </div>
        
        <div class="pwd-wrap">
          {{ form.password }}
          <button class="eye-btn" type="button" aria-label="Mostrar senha">üëÅÔ∏è</button>
        </div>

        <input type="hidden" name="next" value="{{ request.GET.next }}">
        
        <button class="enter-btn" type="submit">Entrar</button>
      </form>

      <div class="divider"></div>

      <p class="register-link">
          N√£o tem uma conta? <a href="{% url 'cadastro1' %}">Criar conta</a>
      </p>
      
      <button type="button" class="back-btn" onclick="window.location.href='{% url 'home' %}'">
          Voltar para a p√°gina inicial
      </button>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
          const eyeBtn = document.querySelector(".eye-btn");
          // Usa o atributo 'type' para ser mais robusto, j√° que id/class s√£o controlados pelo Django Forms
          const passwordInput = document.querySelector('input[type="password"]'); 

          if (eyeBtn && passwordInput) {
              eyeBtn.addEventListener("click", function () {
                  if (passwordInput.type === "password") {
                      passwordInput.type = "text";
                      eyeBtn.textContent = "üôà"; 
                  } else {
                      passwordInput.type = "password";
                      eyeBtn.textContent = "üëÅÔ∏è";
                  }
              });
          } else {
              console.warn("Elemento de senha ou bot√£o de olho n√£o encontrado.");
          }
      });
    </script>
  </div>

{% endblock %}