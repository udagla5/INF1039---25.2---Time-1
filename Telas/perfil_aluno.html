<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOP - Editar Perfil</title>
    
    <link rel="stylesheet" href="css/perfil_aluno_style.css"> 
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>
<body>

    <header class="profile-header">
        <div class="header-content-profile">
            <a href="home.html" class="back-arrow" aria-label="Voltar"><i class="fa-solid fa-arrow-left"></i></a>
            
            <div class="header-text">
                <h1>Editar Perfil</h1>
                <p>Configure a sua experiência NOP</p>
            </div>
        </div>
    </header>

    <main class="profile-main-content">
        
        <div class="avatar-area">
            <div class="profile-avatar">
                <button class="edit-avatar-btn" aria-label="Editar Foto de Perfil">
                    <i class="fa-solid fa-camera"></i>
                </button>
            </div>
        </div>

        <div class="profile-form-box">
            
            <button class="next-step-arrow" aria-label="Avançar para a próxima seção do perfil">
                 <i class="fa-solid fa-arrow-right"></i>
            </button>
            
            <form class="edit-profile-form">
                
                <div class="form-group">
                    <label for="email-institucional">Email institucional</label>
                    <input type="email" id="email-institucional" name="email-institucional" placeholder="seu.nome@aluno.puc-rio.br ou outro email institucional" autocomplete="email">
                </div>

                <div class="form-group">
                    <label for="email-secundario">Email institucional</label>
                    <input type="email" id="email-secundario" name="email-secundario" placeholder="seu.nome@aluno.puc-rio.br ou outro email institucional" autocomplete="off">
                </div>

                <div class="form-group">
                    <label for="telefone">Telefone</label>
                    <input 
                        type="tel" 
                        id="telefone" 
                        name="telefone" 
                        placeholder="(___) ___-____"
                        pattern="(\([0-9]{2}\)\s)?[0-9]{4,5}-[0-9]{4}" 
                        title="Formato: (99) 99999-9999 ou (99) 9999-9999"
                        maxlength="15"
                        autocomplete="tel"
                        onkeypress="return isNumberKey(event)"
                        onkeyup="formatPhone(this)">
                </div>

                <div class="separator-text">Mudar Senha</div>

                <div class="form-group password-group">
                    <input type="password" id="senhaAntigaInput" name="senha-antiga" placeholder="Digite a sua senha antiga">
                    <button type="button" class="toggle-password-btn" aria-label="Mostrar Senha" id="toggleSenhaAntiga">
                        <i class="fa-solid fa-eye-slash"></i>
                    </button>
                </div>

                <div class="form-group password-group">
                    <input type="password" id="senhaNovaInput" name="senha-nova" placeholder="Digite a sua senha nova">
                     <button type="button" class="toggle-password-btn" aria-label="Mostrar Senha" id="toggleSenhaNova">
                        <i class="fa-solid fa-eye-slash"></i>
                    </button>
                </div>

                <button type="submit" class="confirmar-mudancas-btn">Confirmar mudanças</button>
            </form>

            <div class="pagination-indicator">1/2</div>

        </div>

    </main>

    <script>
        // Função para formatar o telefone
        function formatPhone(input) {
            let value = input.value.replace(/\D/g, "");
            let formattedValue = '';

            if (value.length > 0) {
                formattedValue = '(' + value.substring(0, 2);
            }
            if (value.length > 2) {
                formattedValue += ') ' + value.substring(2, 7);
            }
            if (value.length > 7) {
                formattedValue += '-' + value.substring(7, 11);
            }
            
            input.value = formattedValue.substring(0, 15);
        }

        // Função para permitir apenas números
        function isNumberKey(evt) {
            const charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }
            return true;
        }


        // Função para alternar visibilidade da senha (LÓGICA AGORA CORRETA)
        function setupPasswordToggle(toggleId, inputId) {
            const toggleButton = document.getElementById(toggleId);
            const passwordInput = document.getElementById(inputId);

            toggleButton.addEventListener('click', function() {
                // Alterna entre 'password' (oculto) e 'text' (visível)
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                
                // Troca o ícone
                const icon = this.querySelector('i');
                if (type === 'text') {
                    // Se o texto está VISÍVEL (type="text"), mostra o olho ABERTO
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                } else {
                    // Se o texto está OCULTO (type="password"), mostra o olho FECHADO/barrado
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                }
            });
        }
        
        // Aplica a funcionalidade aos campos de senha
        setupPasswordToggle('toggleSenhaAntiga', 'senhaAntigaInput');
        setupPasswordToggle('toggleSenhaNova', 'senhaNovaInput');

    </script>

</body>
</html>